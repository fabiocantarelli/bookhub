<div class="modal fade" id="editBookModal" tabindex="-1" aria-labelledby="editBookModalLabel" aria-hidden="true">
    <div class="modal-dialog ">
        <div class="modal-content">
            <div class="modal-header text-bg-primary">
                <h1 class="modal-title fs-5" id="editBookModalLabel"><i class="bi bi-plus-lg"></i> Editar livro
                </h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="editBookForm" method="post">
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="edit-title" class="col-form-label">Título:</label>
                        <input name="title" type="text" maxlength="40" class="form-control" id="edit-title" required>
                    </div>
                    <div class="mb-3">
                        <label for="edit-publisher" class="col-form-label">Editora:</label>
                        <input name="publisher" type="text" maxlength="40" class="form-control" id="edit-publisher"
                            required>
                    </div>
                    <div class="mb-3">
                        <label for="edit-edition" class="col-form-label">Edição:</label>
                        <input name="edition" type="number" min="1" max="99999" maxlength="5" class="form-control"
                            id="edit-edition" placeholder="Ex: 5" required>
                    </div>
                    <div class="mb-3">
                        <label for="edit-yearOfPublication" class="col-form-label">Ano de publicação:</label>
                        <input name="yearOfPublication" type="number" min="1" maxlength="4" class="form-control"
                            id="edit-yearOfPublication" placeholder="Ex: 1999" required>
                    </div>
                    <div class="mb-3">
                        <label for="edit-authors" class="col-form-label">Autor(es):</label>
                        <select name="authors[]" id="edit-authors" class="form-select select2" multiple required
                            data-placeholder="Selecione um ou mais autor(es)">
                            {% for author in authors %}
                            <option value="{{ author.id }}">{{ author.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="edit-subjects" class="col-form-label">Assunto(s):</label>
                        <select name="subjects[]" id="edit-subjects" class="form-select select2" multiple required
                            data-placeholder="Selecione um ou mais assunto(s)">
                            {% for subject in subjects %}
                            <option value="{{ subject.id }}">{{ subject.description }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary"><i class="bi bi-floppy-fill"></i> Salvar</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    $(document).ready(() => {
        $('#edit-yearOfPublication').on('input', function () {
            let val = $(this).val();
            if (val.length > 4) {
                $(this).val(val.slice(0, 4));
            }
        });

        $('#edit-edition').on('input', function () {
            let val = $(this).val();
            if (val.length > 5) {
                $(this).val(val.slice(0, 5));
            }
        });
    })
</script>